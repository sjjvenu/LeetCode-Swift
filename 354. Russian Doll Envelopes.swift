

import Foundation

/**
 * Definition for a binary tree node.
 */
// public class TreeNode {
//    public var val: Int
//    public var left: TreeNode?
//    public var right: TreeNode?
//    public init(_ val: Int) {
//        self.val = val
//        self.left = nil
//        self.right = nil
//    }
//}

 /**
 * Definition for singly-linked list.
 */

//public class ListNode {
//    public var val: Int
//    public var next: ListNode?
//    public init(_ val: Int) {
//        self.val = val
//        self.next = nil
//    }
//}

 
/*
此题解法与673. Number of Longest Increasing Subsequence解法一样，用swift提交会超时，在c++下提交成功
 */
class Solution {
    func maxEnvelopes(_ envelopes: [[Int]]) -> Int {
        guard envelopes.count > 0 else {
            return 0;
        }
        let sortArray = envelopes.sorted { (value1,value2 ) -> Bool in
            let sum1 = value1[0]*value1[1];
            let sum2 = value2[0]*value2[1];
            return sum1 < sum2;
        }
        var lengths = [Int].init(repeating: 0, count: sortArray.count);
        var counts = [Int].init(repeating: 1, count: sortArray.count);
        for j in 0 ..< sortArray.count {
            for i in 0 ..< j {
                if sortArray[i][0] < sortArray[j][0] && sortArray[i][1] < sortArray[j][1] {
                    if lengths[i] >= lengths[j] {
                        lengths[j] = lengths[i] + 1;
                        counts[j] = counts[i];
                    }
                    else if lengths[i] + 1 == lengths[j] {
                        counts[j] += counts[i];
                    }
                }
            }
        }
        lengths = lengths.sorted();
        return lengths[lengths.count-1]+1;
    }
}

let s = Solution();
print(s.maxEnvelopes([[5471,2603],[8265,5847],[5780,5567],[1112,2148],[6957,9466],[5163,4104],[492,695],[769,1909],[8329,7263],[7847,8071],[2583,2757],[6644,472],[4837,6715],[606,9112],[6465,7623],[3117,1680],[3485,9889],[2761,2656],[821,3366],[8060,717],[9011,5192],[5517,2479],[3196,9343],[7465,5503],[3782,1955],[9279,4130],[6405,8097],[4588,7450],[3629,552],[640,2608],[5433,7232],[7911,9960],[234,7284],[6759,1704],[1409,9647],[4756,1007],[2755,402],[4387,4346],[2844,2649],[5218,562],[3812,4343],[8743,3623],[4376,4257],[5533,7860],[2079,3932],[3711,8630],[854,2032],[7130,1381],[3335,1071],[34,5000],[3197,253],[6222,5204],[672,3977],[7193,9505],[6007,9518],[1933,4152],[7598,2142],[3621,7443],[6691,9486],[5026,2668],[9270,6914],[9382,747],[8566,9666],[9972,8413],[3873,6759],[9427,7215],[6368,9134],[3077,2818],[2608,6896],[4057,9295],[9027,9214],[4480,8123],[6156,3178],[6995,7126],[387,6915],[4511,3601],[2600,3152],[6884,699],[2222,5200],[5077,2052],[3546,9371],[2190,2774],[1541,2130],[9709,7693],[7843,1894],[1094,3516],[5787,5211],[4031,1144],[4725,7980],[9341,2354],[2946,7537],[2580,2652],[5638,3640],[8641,1935],[7886,1309],[6794,7839],[91,9348],[1649,2260],[1987,2203],[428,5686],[5483,6334],[6874,4516],[1329,4793],[5929,4731],[1439,8767],[2815,3811],[4059,9517],[4530,5981],[2743,5777],[8884,9831],[6390,6041],[9437,5753],[1985,6666],[8384,6021],[9048,4049],[7796,3719],[6387,2904],[2126,4431],[5444,1495],[4293,6960],[333,1971],[163,6576],[9368,5310],[3927,1218],[3852,7165],[4447,8590],[8158,9134],[8887,5988],[1898,303],[2605,5519],[4075,7044],[6546,1565],[904,5274],[9790,3875],[9193,6316],[4430,72],[5916,6534],[7176,9023],[798,3515],[7513,9130],[3760,7084],[2731,2085],[3446,9958],[2676,5743],[6170,9309],[2944,1179],[5127,3250],[8292,7126],[6983,5615],[51,5899],[2327,3423],[4249,2595],[7845,3125],[9650,7387],[4802,7365],[7901,1152],[237,8414],[6877,296],[4975,4175],[4652,5080],[7499,7501],[2029,7150],[3792,3826],[9861,4060],[4310,7356],[5311,7741],[1635,5929],[2900,6817],[5819,7210],[1505,1630],[4219,1447],[7834,6767],[7053,1344],[9801,5770],[5996,99],[4685,5563],[6672,225],[7742,5285],[3513,8518],[6829,6700],[7560,9289],[5742,3550],[7563,4333],[1694,6033],[2422,9957],[8478,5081],[9858,7300],[6516,8560],[4012,9836],[7549,1301],[5847,7388],[2508,2988],[7625,3772],[3557,5280],[4848,4876],[2521,13],[5771,7734],[2249,8035],[8997,7427],[6724,9545],[676,9173],[425,3855],[3427,498],[4182,5161],[345,8138],[5102,7240],[2066,9483],[5494,234],[2110,5614],[1008,6134],[5582,2300],[6665,8400],[7934,6804],[9233,2369],[1307,5920],[2385,55],[8332,8216],[6697,8515],[1796,8859],[4969,802],[4426,6624],[3624,7458],[1005,325],[4537,7159],[6961,4074],[4610,3169],[442,6675],[2145,8075],[6134,6993],[3783,5066],[411,801],[9139,4905],[4369,6891],[5071,493],[1611,9196],[1170,9636],[7568,809],[3142,4469],[305,5339],[5750,9597],[1899,4520],[1604,7420],[5852,7755],[5466,5007],[7396,3285],[923,7065],[954,4380],[9195,6220],[5043,9726],[6197,5038],[1369,9692],[16,4009],[9311,4641],[249,5885],[4560,6396],[5808,6141],[7529,6525],[7102,1638],[9505,5049],[2142,8321],[7845,6716],[958,1249],[9091,2367],[4981,6942],[7179,1625],[7255,1902],[2031,8812],[6024,4557],[4031,6358],[9020,9806],[2802,8200],[9681,9055],[1263,5210],[4605,855],[2061,5932],[3597,3351],[7177,2862],[4301,53],[1247,5794],[960,2769],[1958,885],[1471,9042],[5525,7587],[4646,700],[4109,4731],[8176,3543],[1287,8062],[8416,7498],[2560,3518],[2257,390],[650,679],[9338,3053],[2402,1800],[5256,2534],[7490,8146],[5638,4841],[1949,5633],[1234,9030],[2362,101],[6833,5255],[7592,6066],[9682,3984],[6944,8949],[6853,7899],[3618,9003],[2786,4359],[9317,1838],[9034,3103],[3808,2960],[1555,119],[1503,8751],[7742,6493],[3571,2916],[3683,4158],[1511,7909],[5717,8724],[9805,9563],[7037,6948],[6313,6518],[4065,8518],[4593,8206],[7311,4975],[4030,1586],[2597,1214],[6001,9142],[9713,9372],[3193,8954],[2914,2061],[6227,6706],[7254,1030],[6589,6209],[9310,5583],[3922,5713],[9782,585],[5616,866],[1420,1647],[6108,2049],[2054,8209],[7985,9704],[1433,7441],[3855,2169],[798,5760],[859,8769],[7429,3182],[1960,1838],[3942,5859],[4321,3942],[6054,4277],[4889,2766],[5333,2696],[9694,6230],[4557,4017],[5411,1322],[8261,3553],[2211,7525],[271,4474],[7204,5391],[2511,3365],[875,678],[439,6458],[2672,2733],[2854,1778],[5917,2802],[1129,4778],[3534,3746],[1222,1641],[6874,1201],[4103,2153],[228,6604],[6867,8489],[37,7853],[653,631],[7683,802],[1864,5129],[6938,1988],[9284,8804],[6889,8887],[6601,2143],[2772,5303],[7140,2917],[9924,8187],[6231,3865],[6115,7093],[6780,6587],[4582,2071],[7515,7138],[4664,5028],[7105,8257],[7378,7527],[6034,4382],[5077,7880],[7651,8071],[6558,3340],[4718,6034],[4967,7098],[5141,2064],[686,2283],[7618,2022],[463,956],[6873,6569],[6759,6911],[2492,7013],[2735,1168],[1742,2576],[9087,9705],[1387,1864],[9616,6916],[7708,5009],[2868,1669],[7239,2093],[7022,9512],[7840,186],[2610,8095],[6070,8679],[9533,2209],[6525,840],[1965,4706],[4041,7349],[2184,3558],[1369,2361],[1465,3077],[2270,7244],[1135,2393],[3219,4105],[5046,2083],[6317,1713],[2717,9656],[5274,4948],[9798,7574],[6099,9107],[7478,8338],[4700,130],[3740,1017],[6789,3462],[4967,1185],[522,7577],[2331,9960],[9773,156],[9935,4881],[5218,444],[7049,700],[5617,8409],[5158,1264],[1494,5776],[1206,6878],[7474,2247],[3455,304]]))
